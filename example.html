<!DOCTYPE html>
<html>
<head>
	<script src='d3-helpers/d3/d3.min.js'></script>
	<script src='d3-helpers/d3-tip/index.js'></script>
	<script src='d3-helpers/graphicalElement.js'></script>
	<script src='d3-helpers/cells.js'></script>
	<script src='d3-helpers/htmlEscape.js'></script>
	<script src='d3-helpers/identity.js'></script>
	<script src='d3-helpers/interpolateColors.js'></script>
	<script src='d3-helpers/key.js'></script>
	<script src='d3-helpers/labels.js'></script>
	<script src='d3-helpers/round.js'></script>
	<script src='d3-helpers/sample.js'></script>
	<script src='d3-helpers/svgContainer.js'></script>
	<script src='d3-helpers/widget.js'></script>
	<script src='barchart.js'></script>
	<script src='example-data.js'></script>
	<link rel='stylesheet' type='text/css' href='d3-helpers/d3-tip/examples/example-styles.css'>
	<link rel='stylesheet' type='text/css' href='barchart.css'>
</head>
<body>
	<div id='parent1'></div>
	<div id='parent2'></div>
	<div id='parent3'></div>
	<script>
		var TESTING = true;
		var barchart1 = new Barchart('parent1');
		var options1 = {
			height: 600
		};

		// default: red/green, A to Z
		barchart1.initializeVis(data1, options1);

		if (TESTING) {
			function genData (barchart) {
		        var data = barchart.data;

		        var numNew = Math.floor(10 * Math.random());
		        var numRem = Math.floor(10 * Math.random());

		        for (var j = 0; j < numRem; j++) {
		            var index = Math.floor(data.length * Math.random());
		            data = data.slice(0, index).concat(data.slice(index + 1, data.length));
		        }

		        for (var j = 0; j < numNew; j++) {
		            var firstLetter = 'qwertyuiopasdfghjklzxcvbnm'[Math.floor(26 * Math.random())];

		            data.push({
		                key: firstLetter + Math.floor(10000 * Math.random()),
		                value: 2.5 * Math.random() * barchart.dataMax - barchart.dataMax
		            });
		        }

		        return data;
		    }

	        barchart1.container.svg
	            .append('rect')
	            .attr('x', 0)
	            .attr('y', 0)
	            .attr('width', 20)
	            .attr('height', 15)
	            .attr('fill', 'green')
	            .on('click', function () { barchart1.updateData(genData(barchart1)); });
			barchart1.container.svg
				.append('rect')
				.attr('x', 25)
	            .attr('y', 0)
	            .attr('width', 20)
	            .attr('height', 15)
	            .attr('fill', 'red')
				.on('click', function () { barchart1.resize(barchart1.container.svgHeight + 100); });
		}
	</script>
	<script>
		var barchart2 = new Barchart('parent2');
		var options2 = {
			height: 600,
			negColor: '#e67300',
			posColor: '#3366cc',
			byName: false,
			ascending: false
		};

		// orange/blue, + to -
		barchart2.initializeVis(data2, options2);
	</script>
	<script>
		var barchart3 = new Barchart('parent3');
		var options3 = {
			height: 600,
			negColor: '#ff9900',
			posColor: '#990099'
		};

		// yellow/purple, but no data
		barchart3.initializeVis(data3, options3);
	</script>
</body>
</html>
